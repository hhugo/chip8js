{server{
  exception Missing_param of string

  let params = Hashtbl.create 0

  let set = Hashtbl.replace params
  let get name =
    try
      Hashtbl.find params name
    with Not_found -> raise (Missing_param name)

  open Simplexmlparser

  let _  =
    List.iter
      (function
	      | Element(k, _ , PCData (v) :: _) -> set k v
	      | _ -> ())
      (Eliom_config.get_config ())

}}


{client{

  let memory_size = 4096

  let register_nb = 16

  let key_nb = 16

  let game_memory_init = 0x200

  let chip8_fontset =
    [|
      0xF0; 0x90; 0x90; 0x90; 0xF0; (* 0 *)
      0x20; 0x60; 0x20; 0x20; 0x70; (* 1 *)
      0xF0; 0x10; 0xF0; 0x80; 0xF0; (* 2 *)
      0xF0; 0x10; 0xF0; 0x10; 0xF0; (* 3 *)
      0x90; 0x90; 0xF0; 0x10; 0x10; (* 4 *)
      0xF0; 0x80; 0xF0; 0x10; 0xF0; (* 5 *)
      0xF0; 0x80; 0xF0; 0x90; 0xF0; (* 6 *)
      0xF0; 0x10; 0x20; 0x40; 0x40; (* 7 *)
      0xF0; 0x90; 0xF0; 0x90; 0xF0; (* 8 *)
      0xF0; 0x90; 0xF0; 0x10; 0xF0; (* 9 *)
      0xF0; 0x90; 0xF0; 0x90; 0x90; (* A *)
      0xE0; 0x90; 0xE0; 0x90; 0xE0; (* B *)
      0xF0; 0x80; 0x80; 0x80; 0xF0; (* C *)
      0xE0; 0x90; 0x90; 0x90; 0xE0; (* D *)
      0xF0; 0x80; 0xF0; 0x80; 0xF0; (* E *)
      0xF0; 0x80; 0xF0; 0x80; 0x80  (* F *)
    |]


  let gfx_width = 64
  let gfx_height = 32
  let sprite_width = 8

  let default_timer_rate = 1000. /. 60. (* 60 hz *)
  let default_game_rate =  1000. /. 840. (* 840 hz *)

  let timer_rate = ref default_timer_rate
  let game_rate = ref default_game_rate


}}
